# =============================================================================
# Restaurant Analytics Stream Stack - Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your deployment

# =============================================================================
# PostgreSQL Configuration
# =============================================================================
# Main PostgreSQL superuser (for administrative tasks only)
POSTGRES_SUPERUSER=postgres
POSTGRES_SUPERUSER_PASSWORD=admin_secure_password_123

# Default PostgreSQL database (system database)
POSTGRES_DEFAULT_DB=postgres

# Application-specific database and user
RESTAURANT_DB_NAME=restaurant_analytics
RESTAURANT_DB_USER=restaurant_user
RESTAURANT_DB_PASSWORD=restaurant_secure_pass_456

# Airflow database and user
AIRFLOW_DB_NAME=airflow_db
AIRFLOW_DB_USER=airflow_user
AIRFLOW_DB_PASSWORD=airflow_secure_pass_789

# Analytics/BI readonly user
ANALYTICS_READONLY_USER=analytics_reader
ANALYTICS_READONLY_PASSWORD=analytics_readonly_pass_012

# =============================================================================
# Airflow Configuration
# =============================================================================
# Airflow web UI admin user
AIRFLOW_ADMIN_USER=airflow_admin
AIRFLOW_ADMIN_PASSWORD=airflow_web_admin_345
AIRFLOW_ADMIN_EMAIL=admin@restaurant-analytics-local.com
AIRFLOW_ADMIN_FIRSTNAME=Airflow
AIRFLOW_ADMIN_LASTNAME=Administrator

# Airflow system configuration
AIRFLOW_UID=50000
AIRFLOW_GID=0
AIRFLOW_FERNET_KEY=bbYRDPG4d-IrNUF6QMtVF1NybLva1F-3gmFkHEZxKko=

# =============================================================================
# PgAdmin Configuration
# =============================================================================
PGADMIN_DEFAULT_EMAIL=admin@restaurant-analytics-local.com
PGADMIN_DEFAULT_PASSWORD=pgadmin_secure_678

# =============================================================================
# Metabase Configuration
# =============================================================================
METABASE_DB_FILE=/metabase-data/metabase.db
METABASE_ADMIN_EMAIL=admin@restaurant-analytics-local.com
METABASE_ADMIN_PASSWORD=metabase_admin_901

# =============================================================================
# Application Configuration
# =============================================================================
# Restaurant API internal URL (for Airflow to connect)
RESTAURANT_API_URL=http://restaurant-api:8000

# Timezone configuration
TZ=America/Toronto

# =============================================================================
# Security Configuration
# =============================================================================
# Set to 'production' for production deployments
ENVIRONMENT=development

# JWT secret for any authentication (if needed)
JWT_SECRET=your-jwt-secret-key-change-this-in-production

# =============================================================================
# Network Configuration
# =============================================================================
# External port mappings (change if needed to avoid conflicts)
POSTGRES_EXTERNAL_PORT=5432
PGADMIN_EXTERNAL_PORT=8080
AIRFLOW_EXTERNAL_PORT=8081
RESTAURANT_API_EXTERNAL_PORT=8000
METABASE_EXTERNAL_PORT=3000

# =============================================================================
# Volume Configuration
# =============================================================================
# Data persistence paths (relative to project root)
POSTGRES_DATA_PATH=./data/postgres
PGADMIN_DATA_PATH=./data/pgadmin
AIRFLOW_DAGS_PATH=./data/airflow/dags
AIRFLOW_LOGS_PATH=./data/airflow/logs
AIRFLOW_PLUGINS_PATH=./data/airflow/plugins
METABASE_DATA_PATH=./data/metabase

# =============================================================================
# Development Configuration
# =============================================================================
# Set to 'true' to enable hot reload for restaurant API
API_HOT_RELOAD=true

# Set to 'true' to load Airflow example DAGs (useful for learning)
AIRFLOW_LOAD_EXAMPLES=false

# =============================================================================
# Logging Configuration
# =============================================================================
# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
POSTGRES_LOG_LEVEL=INFO
AIRFLOW_LOG_LEVEL=INFO
API_LOG_LEVEL=INFO

# =============================================================================
# Performance Configuration
# =============================================================================
# Airflow configuration
AIRFLOW_PARALLELISM=16
AIRFLOW_DAG_CONCURRENCY=8
AIRFLOW_MAX_ACTIVE_RUNS_PER_DAG=1

# PostgreSQL configuration
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB

# =============================================================================
# NOTES
# =============================================================================
# 1. Change ALL passwords before deploying to production
# 2. For production, use strong passwords with mixed case, numbers, and symbols
# 3. Consider using Docker secrets or external secret management for sensitive values
# 4. The AIRFLOW_UID should match your local user ID for proper file permissions
# 5. Ensure all external ports don't conflict with existing services
# 6. Backup the .env file securely - it contains sensitive information
